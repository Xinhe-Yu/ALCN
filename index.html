<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/main.css">
  <link rel="icon"
    href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAmVBMVEVHcEzBaU8nKyvBaU/BaU8nKyvBaU8nKysnKyvBaU/BaU/BaU/BaU8nKyvBaU/BaU/BaU/BaU/BaU/BaU8nKysnKyvBaU8nKysnKysnKysnKysnKysnKysnKys6MzA1MS5IODMyLy5lRDknKytOOzTBaU8nKyuHUkIxLy2bWkZ0Sj1hQjm3ZU1qRjt+Tj+kXUhOOzQ6MzBXPjbnM8H3AAAAJXRSTlMAEGDf74BAEL+AMM+P779QcGCvn59AICDPjzDfcK+Ar9/fn1BA1nx4zgAAAiZJREFUeNrF19eO2zAQBdBLq1jNapb7lrSh27bk/z8utqU1lCw54jhY5LwNKFyTQ8AjwW4xC4KgiVqrIBjNxpBbNBP90SaAVKTN7v5b0EgbTeRtaow5a7gr4ricA/i++ZATLQCEp/UEg0KPzvIEwLdfumd3/AGg6tYVeAW9K4GYaH84vp09v7wShVA5dVI+Sfl0NUVOf6pU2l/mxNTTFj11Sj1zMDxyl8Eu6c6fcYF1t5rDLmxbAaDyySydA6qms6EWTbtMk+6ylFNQgYuMTBJc1ANBJZ2EuMjJpOz94lCPwu5RIz9xCppfj1aSRZq8bzcHw2+bHeZkl6n2uQyM6WX3NbH8uGp3zijImQ+WR65isEpypcAZL7WrRjA7eCP56BAPFDXREg2/oS1dbbmK29L9OYh6uIrrkm6DdIeIq5izzaRBS/bOqPW000RsdQKzQJ/tew+zFR/URzRUqU8OehAHMbcmCprAbKw7P6kzUEWw2PwVtB2oHmCx0jJrWKy1yFdYLbXE3af+sfFDRD5GKnLmK3BSwYZYITnyMCAjNyEGKE/wSvvvh/MUGILDJWAIbq6Ek7lPvBqOCkGDeDEx/ATupmRXQEClTKNFlK3hUwgl5qQcYoXl40iuMlzYHLfImIuXqen15fD8dnI8HPZPVOE2i8ed7vsywi3GhnG5XIMh+QaYzCDVMMNMRPrhIH4NCMAQvJlEC3m3Z8EqiiLd2UTRfTBiYn4DSpltGhBXhFYAAAAASUVORK5CYII="
    class="">
  <title>ALCN Database</title>
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar fixed-top navbar-expand-md navbar-light shadow">
    <div class="container-fluid px-5 py-2">
      <img src="scr/chaudron-de-sorciere.svg" alt="icon" class="d-none d-lg-block" style="width: 80px;">
      <a class="navbar-brand h1 fs-2 ps-5" style="color:#303030">
        <span class="d-block d-sm-none"> ALCN</span>
        <span class="titleEN">AncientLexiconCN (Beta) </span>
        <span class="titleCN">古代译名数据库</span></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navmenu"
        aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navmenu">
        <ul class="navbar-nav nav nav-pills ms-auto mr-auto mt-3 mt-lg-0 fs-3">
          <li class="nav-item">
            <button type="button" class="btn btn-dark nav-link" data-bs-toggle="modal" data-bs-target="#exampleModal"
              style="color: #f0ead6;">
              使用说明
            </button>
          </li>

        </ul>
      </div>
  </nav>
  <!-- White area for small device -->
  <div class="py-8 d-none d-md-block"></div>


  <!-- Main Content Area -->
  <section class="p-5 box">
    <div class="container-fluid">
      <div class="row" style="justify-content: center;">
        <div class="col-md-6">
          <!-- Data entries will be dynamically inserted here -->
          <div id="dataDisplayArea">
            <!-- White area for pc device-->
            <div class="py-10 d-block d-md-none"></div>
            <!-- Example static entry -->
            <div class="list-group">
              <a class="list-group-item list-group-item-action" aria-current="true">
                <div class="d-flex w-100 justify-content-between">
                  <p class="fw-bold">英文名/原名</p>
                  <p>中译名与其他名称</p>
                  <span class="badge rounded-pill bg-dark">creater</span>
                </div>
              </a>
              <!-- Additional entries -->
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <!-- Sidebar pour les détails -->
          <div id="detailSidebar" class="detail-sidebar p-5 card bg-light detailSidebar">
            <!-- <p class="" style="width: 18rem;" 本数据库目前共有 条信息</p> -->
            <p class="" style="width: 18rem;">点击相应词条获取详细信息</p>
            <!-- Les détails seront injectés ici -->
          </div>
        </div>
      </div>
    </div>

  </section>



  <footer>
    <div class="container">
      <div class="text-center p-1 bg-secondary text-white">
        <p>Copyright &copy; 2024</p>
      </div>
    </div>
  </footer>
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">使用说明</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body div-indent">
          <!-- Contenu de la modal ici -->
          <p>欢迎使用<b>古代译名数据库</b>，目前仍在开发阶段。</p>
          <p>该数据库包括了古代人名地名、术语以及研究古代世界的现代学者的英文名/原名、中译名。</p>
          <p>为了方便查找，原名如是希腊语名，则以英文转写为索引；如果是某外语术语，则以该语言原本的形式表现。</p>
          <p><b>功能：</b></p>
          <p>点击词条，可在右侧详细信息栏中一键<b>复制</b>中译名。</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Assurez-vous que le chemin vers Bootstrap JS est correct -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      fetch('database/data.json')
        .then(response => response.json())
        .then(data => {
          const listGroup = document.querySelector('.list-group'); // Assurez-vous que cette classe correspond à votre conteneur d'entrées

          data.forEach(item => {
            const entryElement = document.createElement('a');
            entryElement.classList.add('list-group-item', 'list-group-item-action');
            entryElement.setAttribute('aria-current', 'true');

            // Construction du contenu pour le deuxième <p> de manière conditionnelle
            let additionalInfo = [item.chineseName, item.otherNames].filter(Boolean).join(', ');

            entryElement.innerHTML = `
                    <div class="d-flex flex-column flex-sm-row w-100 entry" href="javascript:void(0);" onclick="showDetails('${item.ID}', event)">
                        <p class="fw-bold" style="width:200px">${item.englishName}</p>
                        <p class="flex-grow-1">${additionalInfo}</p>
                        <span class="badge rounded-pill bg-primary">${item.creatersInitial}</span>
                    </div>
                `;
            listGroup.appendChild(entryElement);
          });
        })
        .catch(error => console.error('Error loading the data:', error));
    });

    function copyText(elementId) {
      const textToCopy = document.getElementById(elementId).innerText;
      navigator.clipboard.writeText(textToCopy).then(() => {
        document.getElementById("copyButton").classList.add("success")
        setTimeout(() => { document.getElementById("copyButton").classList.remove("success"); }, 3000);;
      }).catch(err => {
        console.error('Failed to copy text: ', err);
      });
    }

    function showDetails(id, event) {
      fetch('database/data.json')
        .then(response => response.json())
        .then(data => {
          const detail = data.find(item => item.ID === id);
          if (detail) {
            const detailSidebar = document.getElementById('detailSidebar');
            detailSidebar.innerHTML = `
                    <div class="card-body">
                        <h3 class="card-title">${detail.englishName}</h3>
                        <div class="copy-container">
                        <p class="pt-3" id="textToCopy">${detail.chineseName}</p><button id="copyButton" type="button" class="btn btn-copy" onclick="copyText('textToCopy')"><span></span></button>
                        </div>
                        <p>${detail.otherNames}</p>
                        <p>${detail.description}</p>
                        <p>Created by: ${detail.creatersInitial}</p>
                        <p>Entry Date: ${detail.entryDate}</p>
                        <p>Last Modified: ${detail.lastModifiedDate} by ${detail.lastModifiedAuthor}</p>
                    </é>
                `;
            detailSidebar.style.display = 'block';
          }
        })
        .catch(error => console.error('Error loading the details:', error));
    }

  </script>
</body>

</html>